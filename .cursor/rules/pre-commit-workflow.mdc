---
description: Mandatory pre-commit validation checklist
alwaysApply: true
---

# Pre-Commit Workflow

Mandatory checklist to be performed before every commit:

**Note**: For testing Inngest workflows, use `npm run dev:all` to run both Next.js and Inngest dev servers together.

1. **Validation**: 
   - Run `npx tsc --noEmit` (Type Check) to ensure no TypeScript errors
   - Run `npm run lint` to ensure no linting errors

2. **Database**: 
   - Run `npm run db:validate` to ensure connectivity.

3. **Ingestion**: 
   - Run `npm run ingest:validate` to validate Reddit ingestion service functionality.

4. **LLM Service**: 
   - Run `npm run llm:validate` to validate LLM extraction and ideation service functionality.

5. **Workflow**: 
   - Run `npm run workflow:test` to validate Inngest workflow pipeline functionality.

6. **UI**: 
   - Run `npm run ui:validate` to validate landing page and dashboard functionality.

7. **Auth**: 
   - Run `npm run auth:validate` to validate authentication and email delivery system functionality.

8. **Flow**: 
   - Run `npm run flow:validate` to validate email digest flow functionality.

9. **Code Cleanup**: 
   - Remove all deprecated and legacy code before committing
   - Search for TODO comments and either implement or remove them
   - Remove unused imports, variables, and functions
   - Ensure no commented-out code blocks remain
   - Verify all error handlers are properly implemented

10. **Audit**: 
   - Update `.cursor/PROMPTS.md` with the key prompt used to generate the feature

11. **History**: 
   - Export the chat history to `.cursor/history/` and link it in the `PROMPTS.md` entry
